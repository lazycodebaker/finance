var Se=Object.defineProperty;var ce=t=>{throw TypeError(t)};var Oe=(t,e,s)=>e in t?Se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var x=(t,e,s)=>Oe(t,typeof e!="symbol"?e+"":e,s),V=(t,e,s)=>e.has(t)||ce("Cannot "+s);var i=(t,e,s)=>(V(t,e,"read from private field"),s?s.call(t):e.get(t)),y=(t,e,s)=>e.has(t)?ce("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),p=(t,e,s,r)=>(V(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),m=(t,e,s)=>(V(t,e,"access private method"),s);import{S as xe,a as S,s as J,b as H,n as Ee,i as ue,d as le,t as Pe,f as Ue,e as _e,g as fe,h as ye,r as O,k as Ie,c as je,j,u as Te}from"./index-CYZ3dVQg.js";var g,o,L,v,U,T,w,M,Q,D,_,I,E,k,c,F,K,G,X,Y,Z,ee,te,ve,me,Qe=(me=class extends xe{constructor(e,s){super();y(this,c);y(this,g);y(this,o);y(this,L);y(this,v);y(this,U);y(this,T);y(this,w);y(this,M);y(this,Q);y(this,D);y(this,_);y(this,I);y(this,E);y(this,k,new Set);this.options=s,p(this,g,e),p(this,w,null),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,o).addObserver(this),de(i(this,o),this.options)?m(this,c,F).call(this):this.updateResult(),m(this,c,Y).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return se(i(this,o),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return se(i(this,o),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,m(this,c,Z).call(this),m(this,c,ee).call(this),i(this,o).removeObserver(this)}setOptions(e,s){const r=this.options,n=i(this,o);if(this.options=i(this,g).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof S(this.options.enabled,i(this,o))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");m(this,c,te).call(this),i(this,o).setOptions(this.options),r._defaulted&&!J(this.options,r)&&i(this,g).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,o),observer:this});const a=this.hasListeners();a&&pe(i(this,o),n,this.options,r)&&m(this,c,F).call(this),this.updateResult(s),a&&(i(this,o)!==n||S(this.options.enabled,i(this,o))!==S(r.enabled,i(this,o))||H(this.options.staleTime,i(this,o))!==H(r.staleTime,i(this,o)))&&m(this,c,K).call(this);const u=m(this,c,G).call(this);a&&(i(this,o)!==n||S(this.options.enabled,i(this,o))!==S(r.enabled,i(this,o))||u!==i(this,E))&&m(this,c,X).call(this,u)}getOptimisticResult(e){const s=i(this,g).getQueryCache().build(i(this,g),e),r=this.createResult(s,e);return ke(this,r)&&(p(this,v,r),p(this,T,this.options),p(this,U,i(this,o).state)),r}getCurrentResult(){return i(this,v)}trackResult(e,s){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),s==null||s(n),e[n])})}),r}trackProp(e){i(this,k).add(e)}getCurrentQuery(){return i(this,o)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=i(this,g).defaultQueryOptions(e),r=i(this,g).getQueryCache().build(i(this,g),s);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,s))}fetch(e){return m(this,c,F).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,v)))}createResult(e,s){var he;const r=i(this,o),n=this.options,a=i(this,v),u=i(this,U),h=i(this,T),f=e!==r?e.state:i(this,L),{state:C}=e;let l={...C},A=!1,b;if(s._optimisticResults){const R=this.hasListeners(),W=!R&&de(e,s),we=R&&pe(e,r,s,n);(W||we)&&(l={...l,..._e(C.data,e.options)}),s._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:$,errorUpdatedAt:ne,status:P}=l;if(s.select&&l.data!==void 0)if(a&&l.data===(u==null?void 0:u.data)&&s.select===i(this,M))b=i(this,Q);else try{p(this,M,s.select),b=s.select(l.data),b=fe(a==null?void 0:a.data,b,s),p(this,Q,b),p(this,w,null)}catch(R){p(this,w,R)}else b=l.data;if(s.placeholderData!==void 0&&b===void 0&&P==="pending"){let R;if(a!=null&&a.isPlaceholderData&&s.placeholderData===(h==null?void 0:h.placeholderData))R=a.data;else if(R=typeof s.placeholderData=="function"?s.placeholderData((he=i(this,D))==null?void 0:he.state.data,i(this,D)):s.placeholderData,s.select&&R!==void 0)try{R=s.select(R),p(this,w,null)}catch(W){p(this,w,W)}R!==void 0&&(P="success",b=fe(a==null?void 0:a.data,R,s),A=!0)}i(this,w)&&($=i(this,w),b=i(this,Q),ne=Date.now(),P="error");const q=l.fetchStatus==="fetching",z=P==="pending",N=P==="error",ae=z&&q,oe=b!==void 0;return{status:P,fetchStatus:l.fetchStatus,isPending:z,isSuccess:P==="success",isError:N,isInitialLoading:ae,isLoading:ae,data:b,dataUpdatedAt:l.dataUpdatedAt,error:$,errorUpdatedAt:ne,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>f.dataUpdateCount||l.errorUpdateCount>f.errorUpdateCount,isFetching:q,isRefetching:q&&!z,isLoadingError:N&&!oe,isPaused:l.fetchStatus==="paused",isPlaceholderData:A,isRefetchError:N&&oe,isStale:ie(e,s),refetch:this.refetch}}updateResult(e){const s=i(this,v),r=this.createResult(i(this,o),this.options);if(p(this,U,i(this,o).state),p(this,T,this.options),i(this,U).data!==void 0&&p(this,D,i(this,o)),J(r,s))return;p(this,v,r);const n={},a=()=>{if(!s)return!0;const{notifyOnChangeProps:u}=this.options,h=typeof u=="function"?u():u;if(h==="all"||!h&&!i(this,k).size)return!0;const d=new Set(h??i(this,k));return this.options.throwOnError&&d.add("error"),Object.keys(i(this,v)).some(f=>{const C=f;return i(this,v)[C]!==s[C]&&d.has(C)})};(e==null?void 0:e.listeners)!==!1&&a()&&(n.listeners=!0),m(this,c,ve).call(this,{...n,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&m(this,c,Y).call(this)}},g=new WeakMap,o=new WeakMap,L=new WeakMap,v=new WeakMap,U=new WeakMap,T=new WeakMap,w=new WeakMap,M=new WeakMap,Q=new WeakMap,D=new WeakMap,_=new WeakMap,I=new WeakMap,E=new WeakMap,k=new WeakMap,c=new WeakSet,F=function(e){m(this,c,te).call(this);let s=i(this,o).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(Ee)),s},K=function(){m(this,c,Z).call(this);const e=H(this.options.staleTime,i(this,o));if(ue||i(this,v).isStale||!le(e))return;const r=Pe(i(this,v).dataUpdatedAt,e)+1;p(this,_,setTimeout(()=>{i(this,v).isStale||this.updateResult()},r))},G=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,o)):this.options.refetchInterval)??!1},X=function(e){m(this,c,ee).call(this),p(this,E,e),!(ue||S(this.options.enabled,i(this,o))===!1||!le(i(this,E))||i(this,E)===0)&&p(this,I,setInterval(()=>{(this.options.refetchIntervalInBackground||Ue.isFocused())&&m(this,c,F).call(this)},i(this,E)))},Y=function(){m(this,c,K).call(this),m(this,c,X).call(this,m(this,c,G).call(this))},Z=function(){i(this,_)&&(clearTimeout(i(this,_)),p(this,_,void 0))},ee=function(){i(this,I)&&(clearInterval(i(this,I)),p(this,I,void 0))},te=function(){const e=i(this,g).getQueryCache().build(i(this,g),this.options);if(e===i(this,o))return;const s=i(this,o);p(this,o,e),p(this,L,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},ve=function(e){ye.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(i(this,v))}),i(this,g).getQueryCache().notify({query:i(this,o),type:"observerResultsUpdated"})})},me);function De(t,e){return S(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function de(t,e){return De(t,e)||t.state.data!==void 0&&se(t,e,e.refetchOnMount)}function se(t,e,s){if(S(e.enabled,t)!==!1){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&ie(t,e)}return!1}function pe(t,e,s,r){return(t!==e||S(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&ie(t,s)}function ie(t,e){return S(e.enabled,t)!==!1&&t.isStaleByTime(H(e.staleTime,t))}function ke(t,e){return!J(t.getCurrentResult(),e)}var ge=O.createContext(!1),Ae=()=>O.useContext(ge);ge.Provider;function Fe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Le=O.createContext(Fe()),Me=()=>O.useContext(Le);function $e(t,e){return typeof t=="function"?t(...e):!!t}var Be=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},He=t=>{O.useEffect(()=>{t.clearReset()},[t])},qe=({result:t,errorResetBoundary:e,throwOnError:s,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&$e(s,[t.error,r]),ze=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},Ne=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,We=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Ve(t,e,s){var f,C,l,A;const r=Ie(),n=Ae(),a=Me(),u=r.defaultQueryOptions(t);(C=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||C.call(f,u),u._optimisticResults=n?"isRestoring":"optimistic",ze(u),Be(u,a),He(a);const[h]=O.useState(()=>new e(r,u)),d=h.getOptimisticResult(u);if(O.useSyncExternalStore(O.useCallback(b=>{const $=n?()=>{}:h.subscribe(ye.batchCalls(b));return h.updateResult(),$},[h,n]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),O.useEffect(()=>{h.setOptions(u,{listeners:!1})},[u,h]),Ne(u,d))throw We(u,h,a);if(qe({result:d,errorResetBoundary:a,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash)}))throw d.error;return(A=(l=r.getDefaultOptions().queries)==null?void 0:l._experimental_afterQuery)==null||A.call(l,u,d),u.notifyOnChangeProps?d:h.trackResult(d)}function Je(t,e){return Ve(t,Qe)}var Ke=(t,e,s={})=>{let r=`${t}=${e}`;if(t.startsWith("__Secure-")&&!s.secure)throw new Error("__Secure- Cookie must have Secure attributes");if(t.startsWith("__Host-")){if(!s.secure)throw new Error("__Host- Cookie must have Secure attributes");if(s.path!=="/")throw new Error('__Host- Cookie must have Path attributes with "/"');if(s.domain)throw new Error("__Host- Cookie must not have Domain attributes")}if(s&&typeof s.maxAge=="number"&&s.maxAge>=0){if(s.maxAge>3456e4)throw new Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");r+=`; Max-Age=${Math.floor(s.maxAge)}`}if(s.domain&&s.prefix!=="host"&&(r+=`; Domain=${s.domain}`),s.path&&(r+=`; Path=${s.path}`),s.expires){if(s.expires.getTime()-Date.now()>3456e7)throw new Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");r+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(r+="; HttpOnly"),s.secure&&(r+="; Secure"),s.sameSite&&(r+=`; SameSite=${s.sameSite.charAt(0).toUpperCase()+s.sameSite.slice(1)}`),s.partitioned){if(!s.secure)throw new Error("Partitioned Cookie must have Secure attributes");r+="; Partitioned"}return r},Ge=(t,e,s)=>(e=encodeURIComponent(e),Ke(t,e,s)),Xe=(t,e)=>(t=t.replace(/\/+$/,""),t=t+"/",e=e.replace(/^\/+/,""),t+e),re=(t,e)=>{for(const[s,r]of Object.entries(e)){const n=new RegExp("/:"+s+"(?:{[^/]+})?");t=t.replace(n,`/${r}`)}return t},Ye=(t,e)=>{switch(e){case"ws":return t.replace(/^http/,"ws");case"http":return t.replace(/^ws/,"http")}},Ze=t=>/^https?:\/\/[^\/]+?\/index$/.test(t)?t.replace(/\/index$/,"/"):t.replace(/\/index$/,"");function B(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function be(t,e){if(!B(t)&&!B(e))return e;const s={...t};for(const r in e){const n=e[r];B(s[r])&&B(n)?s[r]=be(s[r],n):s[r]=n}return s}var Re=(t,e)=>new Proxy(()=>{},{get(r,n){if(!(typeof n!="string"||n==="then"))return Re(t,[...e,n])},apply(r,n,a){return t({path:e,args:a})}}),et=class{constructor(t,e){x(this,"url");x(this,"method");x(this,"queryParams");x(this,"pathParams",{});x(this,"rBody");x(this,"cType");x(this,"fetch",async(t,e)=>{if(t){if(t.query){for(const[h,d]of Object.entries(t.query))if(d!==void 0)if(this.queryParams||(this.queryParams=new URLSearchParams),Array.isArray(d))for(const f of d)this.queryParams.append(h,f);else this.queryParams.set(h,d)}if(t.form){const h=new FormData;for(const[d,f]of Object.entries(t.form))if(Array.isArray(f))for(const C of f)h.append(d,C);else h.append(d,f);this.rBody=h}t.json&&(this.rBody=JSON.stringify(t.json),this.cType="application/json"),t.param&&(this.pathParams=t.param)}let s=this.method.toUpperCase();const r={...(t==null?void 0:t.header)??{},...typeof(e==null?void 0:e.headers)=="function"?await e.headers():e!=null&&e.headers?e.headers:{}};if(t!=null&&t.cookie){const h=[];for(const[d,f]of Object.entries(t.cookie))h.push(Ge(d,f,{path:"/"}));r.Cookie=h.join(",")}this.cType&&(r["Content-Type"]=this.cType);const n=new Headers(r??void 0);let a=this.url;a=Ze(a),a=re(a,this.pathParams),this.queryParams&&(a=a+"?"+this.queryParams.toString()),s=this.method.toUpperCase();const u=!(s==="GET"||s==="HEAD");return((e==null?void 0:e.fetch)||fetch)(a,{body:u?this.rBody:void 0,method:s,headers:n,...e==null?void 0:e.init})});this.url=t,this.method=e}},tt=(t,e)=>Re(function s(r){const n=[...r.path];if(n[n.length-1]==="toString")return n[n.length-2]==="name"?n[n.length-3]||"":s.toString();if(n[n.length-1]==="valueOf")return n[n.length-2]==="name"?n[n.length-3]||"":s;let a="";if(/^\$/.test(n[n.length-1])){const f=n.pop();f&&(a=f.replace(/^\$/,""))}const u=n.join("/"),h=Xe(t,u);if(a==="url")return r.args[0]&&r.args[0].param?new URL(re(h,r.args[0].param)):new URL(h);if(a==="ws"){const f=Ye(r.args[0]&&r.args[0].param?re(h,r.args[0].param):h,"ws");return new WebSocket(f)}const d=new et(h,a);if(a){e??(e={});const f=be(e,{...r.args[1]??{}});return d.fetch(r.args[0],f)}return d},[]);const st=tt("http://localhost:8000/"),rt=st.api,it=je("/")({errorComponent:()=>j.jsx("div",{children:"Error While Rendering Index Page"}),component:nt}),Ce=async()=>{const t=await rt.auth.user.$get();return t.ok?(await t.json()).data:null};function nt(){const{isPending:t,isLoading:e,data:s,error:r}=Je({queryKey:["auth"],queryFn:Ce}),n=Te();return O.useEffect(()=>{s&&localStorage.setItem("user",JSON.stringify(s)),localStorage.getItem("user")||n({to:"/about"})},[s,n]),t?j.jsx("p",{children:"Loading..."}):e?j.jsx("p",{children:"Loading..."}):r?j.jsx("p",{children:"Error"}):j.jsx(j.Fragment,{children:s==null?void 0:s.username})}const ct=Object.freeze(Object.defineProperty({__proto__:null,Route:it,getAuth:Ce},Symbol.toStringTag,{value:"Module"}));export{rt as a,Ce as g,ct as i,Je as u};
